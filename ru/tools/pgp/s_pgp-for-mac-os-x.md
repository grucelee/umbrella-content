---
index: 11
title: PGP для Mac OS
---
# РУКОВОДСТВО ПО PGP ДЛЯ MAC OS

Зашифрованная электронная почта для Mac

**Урок для чтения: [E-mail](umbrella://communications/email)**   
**Местоположение загрузки:**
- [GPG Suite](https://gpgtools.org/)   
- [Mozilla Thunderbird](https://www.mozilla.org/thunderbird/)   
- [Enigmail](https://www.enigmail.net/home/index.php)

**Требования к компьютеру:** Интернет-соединение, компьютер под управлением Mac OS, учетная запись e-mail  
**Версия, используемая в этом руководстве:**  
- GPG Suite Beta 4  
- Mozilla Thunderbird 31.2.0  
- Enigmail 1.7.2  

**Лицензия:** Бесплатное ПО; сочетание лицензий на бесплатное программное обеспечение  
**Уровень:** Продвинутый  
**Дополнительное чтение:** [http://support.gpgtools.org/](http://support.gpgtools.org/)  
**Требуемое время:** 30-60 минут  

**Использование PGP даст вам:**
- Способность защитить ваши сообщения электронной почты от прочтения кем-либо, кроме их предполагаемых получателей.
- Возможность доказать, что электронное письмо пришло от конкретного человека, а не является поддельным сообщением, отправленным другим отправителем (в противном случае электронное письмо очень легко подделать). Оба этих фактора являются важной защитой, если вы подвергаетесь преследованию или дезинформации.

**Примечание:** Если вы обеспокоены тем, что электронная почта, зашифрованная PGP, может быть небезопасной после того, как в мае 2018 года были обнаружены уязвимости, прочитайте раздел Efail нашего расширенного урока [Электронная почта](umbrella://communications/email).

### 1.0 Прежде чем начать

Чтобы использовать Pretty Good Privacy (PGP), вам нужно установить дополнительное программное обеспечение, которое будет работать с вашей текущей почтовой программой. Вам также нужно будет создать закрытый ключ, который вы будете хранить в секрете. Закрытый ключ - это то, что вы будете использовать для расшифровки отправленных вам электронных писем, а также для цифровой подписи отправляемых вами электронных писем, чтобы показать, что они действительно пришли от вас. Наконец, вы узнаете, как распространять ваш открытый ключ - небольшой фрагмент информации, который другие должны будут знать, прежде чем они смогут отправлять вам зашифрованные письма, и который они могут использовать для проверки отправляемых вами электронных писем.

Это руководство покажет вам, как использовать PGP с Apple Mac (но не с iPad или iPhone), со встроенной почтовой программой Mac или с популярной альтернативной почтовой программой Mozilla Thunderbird.

В настоящее время вы не можете использовать PGP напрямую с сервисами e-mail, такими как Gmail, Hotmail, Yahoo! Mail или Outlook Live. Вы все еще можете использовать свой адрес электронной почты; вам просто нужно настроить его с помощью программы Thunderbird на вашем компьютере.

**Обратите внимание, что для работы обоих отправителей/получателей электронной почты необходимо использовать PGP-совместимое программное обеспечение.**

Люди обычно используют это только на своих личных устройствах, а не на общих. К счастью, PGP доступен для большинства настольных компьютеров и мобильных устройств, и вы можете показать эти руководства, чтобы помочь им настроить свою собственную версию. Это руководство предназначено для пользователей Mac.

### 2.0 Установка GPGTools на ваш Mac

PGP - это открытый стандарт, который означает, что его может использовать различное программное обеспечение. Программное обеспечение, которое мы собираемся использовать для PGP, называется GPG Suite от GPG Tools, потому что оно работает на Mac, бесплатно для всех и имеет открытый исходный код: исходный код доступен для любого, чтобы проверять наличие ошибок и слабостей.

После установки GPG Suite вы можете настроить ключи в первый раз, а затем включить PGP для Apple Mail и, опционально, Thunderbird.

**Шаг 1: установка программы.**

Сначала перейдите на [https://www.gpgtools.org/](https://www.gpgtools.org/) в своем браузере и выберите «Скачать GPG Suite.

![image](tool_pgposx1.png)

В итоге вы получите образ диска, по которому вы можете щелкнуть, чтобы установить программное обеспечение. Если вы не привыкли устанавливать стороннее программное обеспечение на свой компьютер, обратитесь к ближайшему специалисту по Mac - это шаг, с которым может помочь большинство специалистов, даже если они не знают PGP или шифрования.

![image](tool_pgposx2.png)

Нажав на кнопку установки, вы получите список инструментов, которые будут добавлены на ваш компьютер. 

![image](tool_pgposx3.png)

**_Что именно я здесь устанавливаю?_**

Эти инструменты в основном будут работать фоном, так что ваш Mac может использовать более одной программы PGP. Думайте о них как о программах, которые могут использовать другие программы, а не как о приложениях, которые вы будете использовать напрямую. GPGMail позволяет Apple Mail отправлять и читать электронные письма PGP, GPG Keychain Access позволяет сохранять ваши закрытые и открытые ключи таким же образом, как вы можете сохранять другие пароли на вашем Mac.

GPGServices дополнительно добавляет в OS X функцию, позволяющую использовать PGP непосредственно в программах, отличных от электронной почты (например, в текстовом процессоре). GPGPreferences для изменения настроек PGP в настройках Apple. Наконец, MacGPG2 - это основной инструмент, который любая программа должна использовать для шифрования или подписи.

В октябре 2014 года команда GPG Tools объявила, что скоро будет взимать плату за GPGMail, часть их пакета, которая позволяет использовать GPG с приложением Apple Mail. В этом руководстве рассказывается об использовании GPG с Thunderbird, поэтому он не использует этот компонент. Вы можете просто использовать часть GPG Suite с нулевой стоимостью, как описано здесь, если хотите. Эта опция имеет дополнительное преимущество, заключающееся в том, что все эти инструменты являются «свободными программами», а это означает, что вам по-прежнему разрешено свободно просматривать, редактировать и распространять исходный код GPG Mail, чтобы они были еще более безопасными. Для получения дополнительной информации см. [Собственный FAQ] GPG Tools (https://gpgtools.org/news.html) об их решении.

Нажмите «Продолжить», чтобы установить GPG Suite.

![image](tool_pgposx4.png)

Когда установка будет завершена, откройте GPG Keychain (находится в папке с приложениями), если он не открывается автоматически и не предлагает вам сгенерировать ключи PGP после установки, нажмите «Создать», чтобы сгенерировать ключи PGP.

![image](tool_pgposx5.png)

**Шаг 2: Создайте свой ключ PGP**

Иногда, когда вы устанавливаете новое программное обеспечение, ваш компьютер будет задавать вам вопросы, на которые нет очевидного ответа, фактически не давая вам никаких советов о том, как ответить. Это один из тех моментов.

Важно потратить немного времени на обдумывание ответов, которые вы здесь дадите, потому что изменить детали ключа PGP позже может быть сложно, и если вы решили где-то опубликовать свой ключ, вы не сможете отменить его публикацию. (По-прежнему существуют тысячи старых открытых ключей 1990-х годов с именами и старыми адресами электронной почты людей, которые их сделали тогда).

Ключи PGP содержат имя и e-mail адрес, которые связывают ключ с вами. E-mail будет одним из способов, с помощью которых другие смогут узнать, какой ключ использовать, когда они шифруют сообщение для вас.

**_Когда я не должен указывать свое настоящее имя или e-mail в моем ключе PGP? Когда я не должен загружать свой ключ?_**

Для большинства людей имеет смысл добавить реальный адрес электронной почты к вашему ключу и загрузить его на общедоступные серверы ключей - так люди будут подбирать правильный ключ для вас. Они могут отправить вам e-mail напрямую и знать, что оно будет зашифровано с помощью правильного ключа, и когда они получат подписанное электронное письмо от вас, цифровая подпись будет помечена вашим именем.

Для некоторых людей, однако, не имеет смысла добавлять ваше настоящее имя к вашему ключу, например, если ваша модель угроз означает, что ваша личная информация публично привязана к вашему ключу (и связанному с ним адресу e-mail) - не очень хорошая идея. Эдвард Сноуден общался с журналистами, используя PGP и анонимный адрес электронной почты, прежде чем он раскрыл свою личность; его ключ PGP определенно не был отмечен его именем.

**Загрузка вашего ключа является обычной практикой, но она может показать, что вы используете шифрование, даже если вы не используете свое собственное имя. Также, как мы увидим, другие могут загрузить ваш ключ и связать с ним свой собственный ключ, подразумевая, что у вас и у них есть связь. Это может быть вредно, если вы общаетесь и не хотите, чтобы люди это знали. Это также может быть неприятно, если вы не общаетесь, но ваш злоумышленник хочет, чтобы люди думали, что вы связаны.**

Вот приблизительное руководство: если вы думаете об использовании псевдонима в целом, используйте этот псевдоним (и альтернативный адрес e-mail) при маркировке своего ключа. Если вы находитесь в более опасной среде, когда вы не хотите, чтобы люди вообще знали, что вы используете PGP, или знали, с кем вы общаетесь, не загружайте свой ключ на серверы открытых ключей - и убедитесь, что небольшая группа людей, с которыми вы общаетесь, также знает, что не стоит загружать ваш ключ. Существуют и другие способы проверки ключей, которые не зависят от их доступности на сервере открытых ключей - см. руководство EFF по [Проверке ключей](https://ssd.eff.org/en/module/key-verification#overlay=en/node/37/) для получения дополнительной информации.

Установите флажок «Загружать открытый ключ после создания», если вы хотите, чтобы другие могли быстро найти ваш ключ, чтобы они могли отправлять вам зашифрованные сообщения. Это все равно, что добавить свой номер телефона в общедоступный телефонный справочник: он вам не нужен, но это удобно для других.

Перед созданием ключа разверните «Дополнительные параметры». Вы можете оставить комментарий пустым и оставить тип ключа «RSA и RSA (по умолчанию)». Но обязательно измените поле Длина на 4096.

![image](tool_pgposx6.png)

**Срок действия вашего ключа истекает в определенное время; когда это произойдет, другие люди полностью перестанут использовать его для новых писем, хотя вы можете не получить никакого предупреждения или объяснения причин. Таким образом, вы можете отметить в своем календаре и обратить внимание на этот вопрос примерно за месяц до истечения срока действия.**

Можно продлить срок действия существующего ключа, задав ему новый, более поздний срок действия, или можно заменить его новым ключом, создав новый с нуля. Для обоих процессов может потребоваться связаться с людьми, которые пишут вам по электронной почте, и убедиться, что они получили обновленный ключ; текущее программное обеспечение не очень хорошо автоматизирует это. Так что сделайте напоминание для себя; если вы не думаете, что сможете управлять им, вы можете установить ключ так, чтобы он никогда не истекал, хотя в этом случае другие люди могут попытаться использовать его, чтобы связаться с вами в будущем, даже если вы больше не будете иметь закрытый ключ или больше не использовать PGP.

Когда вы будете готовы, нажмите кнопку «Создать ключ».

Ваш компьютер начнет генерировать как ваш открытый, так и закрытый ключ. Это может занять не более пары минут (это займет некоторое время, потому что для создания ключей ваш компьютер должен собирать случайные числа. Думайте об этом как о том, что ваш компьютер бросает пару кубиков много, много, много раз).

![image](tool_pgposx7.png)

Когда вы закончите генерировать свой ключ, вы увидите его в списке GPG Keychain Access. Вы можете дважды щелкнуть по своему ключу, чтобы увидеть информацию о нем, включая его «отпечаток» - уникальный способ идентифицировать ваш ключ PGP.

Сейчас самое время создать сертификат отзыва. (Сертификат отзыва - это файл, который вы можете сгенерировать, который объявляет о том, что вы больше не доверяете этому ключу. Вы генерируете его, когда у вас еще есть секретный ключ, и сохраняете его для любой будущей неприятности.) В будущем, если вы когда-нибудь будете беспокоиться, что ваш закрытый ключ был скопирован кем-то или что вы случайно удалили или потеряли свой закрытый ключ, или вы забыли свою фразу-пароль, вы можете сообщить всем, что ключ был отозван или отменен, с помощью сертификата отзыва.

Лучше создать его сразу, потому что вам нужен закрытый ключ и пароль для создания сертификата отзыва. Если вы оставите это на потом, вы можете потерять одно или другое, и тогда будет слишком поздно. Поэтому создайте сертификат, нажав на свой ключ, выбрав пункт меню «Ключ», а затем «Создать сертификат отзыва». Вам будет предложено куда-нибудь сохранить файл. Возможно, вы захотите сохранить его вместе с резервной копией ключа (см. следующий шаг).

**Шаг 3: Резервное копирование вашего ключа PGP**

Если вы потеряете доступ к своему закрытому ключу, вы не сможете расшифровать входящую почту PGP или старую почту. С другой стороны, вы хотите сохранить свой закрытый ключ как можно надежнее.

Возможно, вы захотите сохранить резервную копию на USB-ключ, который вы надежно спрячете. Он понадобится вам только в том случае, если вы потеряете свой оригинальный ключ, но в целях безопасности вы захотите, чтобы он не попал в руки ваших потенциальных злоумышленников.

**_Все ли потеряно, если мои злоумышленники завладеют моим закрытым ключом PGP?_**

Что если кто-то украдет ваш Mac или у вас заберут ваш резервный ключ? Означает ли это, что ваши сообщения PGP уязвимы? Нет: если вы выбрали хорошую фразу-пароль и никто не смог узнать, что это такое, вы все равно должны быть в основном защищены. Чтобы быть в безопасности, вы можете отозвать свой старый ключ и создать новый ключ PGP. Это не помешает вашему старому ключу дешифровать старую электронную почту, но будет препятствовать другим людям использовать старый ключ для своих новых писем.

Чтобы сделать резервную копию вашего ключа, откройте GPG Keychain Access. Выберите свой ключ и нажмите «Экспорт» на панели инструментов. Вставьте USB-накопитель в устройство и выберите его в разделе «Куда» диалогового окна «Сохранить как ...». Установите флажок «Разрешить экспорт секретного ключа».

**ВАРИАНТ А) Настройка Apple Mail**

Когда вы впервые откроете Apple Mail, вы увидите мастер первого запуска, который поможет вам настроить адрес электронной почты. Введите свое имя, e-mail и пароль электронной почты и нажмите «Создать».

![image](tool_pgposx8.png)

**Мастер настройки учетной записи почты**

Если вы используете популярные бесплатный почтовый сервис, такой как Gmail, Mail сможет автоматически определять ваши настройки электронной почты при нажатии кнопки «Продолжить». Если этого не произойдет, вам может потребоваться вручную настроить параметры IMAP и SMTP. Поговорите с компанией, которую вы используете для электронной почты, или спросите кого-нибудь опытного, кто знаком с вашим e-mail провайдером (например, ИТ-специалист на работе или друг, который использует тот же ISP, что и вы. Им не нужно знать о PGP , но вы можете спросить их: «Можете ли вы настроить Apple Mail для меня?»).

![image](tool_pgposx9.png)

**Автоопределение настроек учетной записи почты**

Когда вы пишете новое сообщение, под полем «Тема» располагаются два значка. Там есть замок (шифрование) и звездочка (электронная подпись). Если замок закрыт, это означает, что это письмо будет зашифровано, а если у звезды есть отметка, это означает, что это письмо будет иметь цифровую подпись.

**Отправка PGP подписанного или зашифрованного электронного письма**

![image](tool_pgposx10.png)

Вы всегда можете подписать свою электронную почту, даже если получатель не использует PGP. Поскольку для цифровой подписи писем требуется ваш секретный ключ, при первом подписании письма в Mail появится окно с запросом вашей парольной фразы.

Вы можете шифровать электронную почту, только если человек, которому вы пишете, использует PGP и у вас есть открытый ключ этого человека. Если значок замка шифрования разблокирован и окрашен в серый цвет, и вы не можете щелкнуть по нему, это означает, что сначала вам необходимо импортировать открытый ключ получателя. Либо попросите их отправить его вам, либо воспользуйтесь приложением GPG Keychain Access, чтобы найти ключ на открытом сервере ключей.

Чтобы быть в полной безопасности, вам необходимо проверить ключи, полученные от сервера ключей или вашего коллеги. См. Руководство EFF по [Проверке ключа](https://ssd.eff.org/en/module/key-verification#overlay=en/node/37/) для получения дополнительной информации.

**ВАРИАНТ B) Использование PGP с Mozilla Thunderbird**

В этом пошаговом руководстве показано, как использовать GPG с бесплатным почтовым клиентом Thunderbird с открытым исходным кодом от Mozilla вместе с плагином Enigmail для шифрования электронной почты.

Сначала загрузите Thunderbird с [https://www.mozilla.org/thunderbird](https://www.mozilla.org/thunderbird), смонтируйте образ диска, как вы это делали с помощью инструментов GPG, и перетащите Thunderbird в Приложения. Когда вы открываете его в первый раз, он спросит, хотите ли вы установить его в качестве почтового клиента по умолчанию. Идите дальше и нажмите «Установить по умолчанию». 

![image](tool_pgposx11.png)

Тогда вы увидите мастер первого запуска. Чтобы настроить существующий адрес e-mail, нажмите «Пропустить это и использовать мой существующий адрес». Затем введите свое имя, e-mail и пароль к своей учетной записи почты.

![image](tool_pgposx12.png)

Если вы используете популярные бесплатные почтовые сервисы, такие как Gmail, Thunderbird сможет автоматически определять ваши настройки электронной почты, когда вы нажимаете «Продолжить». Если этого не произойдет, вам может потребоваться вручную настроить параметры IMAP и SMTP - обратитесь за помощью к своему интернет-провайдеру или другу, который знает, как настроить электронную почту. Иногда Thunderbird может просто угадать правильные настройки.

**Если вы используете двухфакторную аутентификацию в Google (и, в зависимости от модели угрозы, вам, вероятно, следует!), Вы не можете использовать свой стандартный пароль Gmail с Thunderbird. Вместо этого вам нужно будет создать новый пароль для приложения, чтобы Thunderbird мог получить доступ к вашей учетной записи Gmail. См. [Собственное руководство Google](https://support.google.com/mail/answer/1173270?hl=en) для этого.**

![image](tool_pgposx13.png)

После завершения настройки Thunderbird для проверки электронной почты нажмите «Готово». Затем нажмите «Входящие» в левом верхнем углу, чтобы загрузить ваши электронные письма.

Теперь, когда вы установили и настроили Thunderbird для работы с электронной почтой, вам нужно установить [Enigmail](https://www.enigmail.net/home/index.php), надстройку GPG для Thunderbird. В Thunderbird щелкните значок меню в правом верхнем углу и выберите «Дополнения».

![image](tool_pgposx14.png)

Ищите «enigmail» в окне поиска в правом верхнем углу. 

![image](tool_pgposx15.png)

Нажмите кнопку Установить рядом с расширением Enigmail, чтобы загрузить и установить Enigmail. Когда это будет сделано, нажмите «Перезагрузить сейчас», чтобы перезапустить Thunderbird.

При первом запуске Thunderbird с включенной Enigmail открывается мастер установки OpenPGP. Нажмите «Отмена». Вместо этого мы вручную настроим Enigmail.

Нажмите кнопку меню, наведите курсор мыши на «Настройки» и выберите «Настройки учетной записи».

![image](tool_pgposx16.png)

Перейдите на вкладку Безопасность OpenPGP. Убедитесь, что установлен флажок «Включить поддержку OpenPGP (Enigmail) для этой личности». Должен быть выбран «Использовать определенный идентификатор ключа OpenPGP», и если ваш ключ еще не выбран, вы можете нажать «Выбрать ключ», чтобы выбрать его.

Также следует отметить «Подписывать незашифрованные сообщения по умолчанию», «Подписывать зашифрованные сообщения по умолчанию» и «Использовать PGP / MIME по умолчанию», но не (для большинства людей) «Шифровать сообщения по умолчанию».

Если большинство людей, которым вы отправляете электронные письма, используют PGP (или вы хотели бы призвать их сделать это), вы можете шифровать их по умолчанию. Было бы идеально зашифровать все письма, которые вы отправляете, но это не всегда возможно. Помните, что вы можете отправлять зашифрованные сообщения только другим людям, которые используют PGP, и вам необходимо иметь их открытые ключи в цепочке для ключей. Для большинства людей ручной выбор шифрования каждого отправленного вами письма, вероятно, подойдет лучше всего. 

![image](tool_pgposx17.png)

Затем нажмите «ОК», чтобы сохранить все настройки.

Поздравляем, теперь у вас настроены Thunderbird и Enigmail! Вот несколько быстрых указаний:

- Вы можете нажать кнопку меню, навести курсор мыши на OpenPGP и открыть Key Management, чтобы увидеть менеджер ключей PGP, встроенный в Enigmail. Это очень похоже на GPG Keychain Access, и вы сами выбираете, что будете использовать.  
- Когда вы пишете новое сообщение, в правом нижнем углу окна есть два значка: ручка (цифровая подпись) и ключ (шифрование). Если значки золотые, это означает, что они выделены, а если они серебряные, значит, они не активны. Нажмите на них, чтобы переключить опцию подписи и шифрования писем, которые вы пишете.

![image](tool_pgposx18.png)
