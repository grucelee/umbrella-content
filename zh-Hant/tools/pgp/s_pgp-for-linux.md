---
index: 10
title: 適用於Linux的PGP
---
# PGP for Linux 工具指南 

## 適用於Linux的PGP工具指南
適用於Linux的加密電子郵件

** 課程內容如下：
- [郵件](umbrella://communications/email)**  
**計算機要求：**互聯網連接，運行Linux的計算機，電子郵件帳戶
**本指南中使用的版本：**
- Linux：Debian 7.0（“Wheezy”）
- Mozilla Thunderbird 24.8.1
- Enigmail 1.6
- GPG4Win 1.4.18
**授權條款：**免費軟件; 混合自由軟體授權條款
**程度：**專家課程
**其他參考資料：**
[https://www.gnupg.org/documentation/guides.html](https://www.gnupg.org/documentation/guides.html)
**所需時間：** 30-60分鐘

**使用PGP會給你：**
- 保護您的電子郵件通信的能力不被除預期收件人之外的任何人閱讀。
- 能夠證明電子郵件來自特定的人，而不是由另一個發件人發送的虛假郵件（否則電子郵件很容易被製作）。如果您成為監視或錯誤信息的目標，這兩者都是重要的防禦措施。

**注意：**如果您擔心在2018年5月報告漏洞後PGP加密電子郵件可能變得不安全，請閱讀我們的[電子郵件](umbrella://communications/email)進階課程的Efail部分。

### 1.0 開始之前

要使用Pretty Good Privacy（PGP），您需要安裝一些可與您當前的電子郵件程序配合使用的額外軟件。您還需要創建一個私鑰，您將保密。您將使用私鑰解密發送給您的電子郵件，並對您發送的電子郵件進行數字簽名，以顯示它們真正來自您。最後，您將學習如何分發您的公鑰 - 在他們向您發送加密郵件之前，他們需要知道的一小部分信息，以及他們可以用來驗證您發送的電子郵件。

本指南將向您展示如何使用流行的開源圖形電子郵件客戶端Mozilla Thunderbird將PGP與Linux風格的操作系統配合使用。

您目前無法將PGP直接用於Gmail，Hotmail，Yahoo!等網絡電子郵件服務。郵件或Outlook Live。您仍然可以使用您的網絡郵件地址;您只需要在計算機上配置Thunderbird程序即可。

**請注意，電子郵件會話的兩端都需要使用與PGP兼容的軟件才能工作。**

人們通常只在自己的個人設備上使用它，而不是在共享設備上。幸運的是，PGP適用於大多數台式計算機和移動設備，您可以將它們指向這些指南以幫助他們設置自己的版本。

### 2.0 安裝Thunderbird，GnuPG和Enigmail

PGP是一個開放標準，這意味著不止一個軟件可以使用它。我們將用於PGP的軟件稱為GnuPG。我們還將添加一個名為Enigmail的Thunderbird插件，它允許您在Thunderbird中使用GnuPGP。以下說明需要使用命令行一些安慰。

如果您正在使用基於Red Hat的發行版（如Red Hat或Fedora Core），請打開終端並運行以下命令：

_sudo yum install gnupg thunderbird thunderbird-enigmail_

如果您使用的是基於Ubuntu的發行版，如Ubuntu或Linux Mint，請打開終端並鍵入以下命令以確保安裝了正確的軟件：

_sudo apt-get install gnupg thunderbird enigmail_

如果您使用的是Debian發行版，您會發現Thunderbird被稱為“Icedove”。像Debian一般，這是完全合理但有些模糊的原因。除了這個名字之外，它是完全相同的程序：我們不會再次提到Icedove，但你可以在本指南的其餘部分用Icedove替換“Thunderbird”，一切都應該仍然有效。

在終端中使用此命令來安裝它：

_sudo apt-get install gnupg icedove enigmail_

### 2.1 配置Thunderbird

現在您已經安裝了Thunderbird，就像打開計算機上的其他應用程序一樣打開它（您可以從菜單上的應用程序列表中選擇它，或者在應用程序搜索中鍵入它的名稱）。您將看到第一個運行嚮導出現。![圖像](tool_pgplin1.png)

要設置現有的電子郵件地址，請單擊“跳過此內容並使用我現有的電子郵件”，然後在電子郵件帳戶中輸入您的姓名，電子郵件地址和密碼。![圖像](tool_pgplin2.png)

如果您使用Gmail等熱門免費電子郵件服務，Thunderbird應該能夠在您點擊“繼續”時自動檢測您的電子郵件設置。

**如果您對Google使用雙因素身份驗證（根據您的威脅模型，您可能應該這樣做！），您無法在Thunderbird中使用標準Gmail密碼。相反，您需要為Thunderbird創建一個新的應用程序專用密碼才能訪問您的Gmail帳戶。有關此操作，請參閱[Google指南](https://support.google.com/mail/answer/1173270?hl=en).**
![圖像](tool_pgplin3.png)

如果不是，您可能需要手動配置IMAP和SMTP設置。如果您不知道如何執行此操作，請與您的電子郵件提供商聯繫，或詢問熟悉您的電子郵件提供商的技術人員（因此，工作中的IT人員或使用與您相同的ISP的技術朋友;他們不需要知道如何使用PGP，但你可以問他們“你知道我的電子郵件地址的IMAP和SMTP設置嗎？”）。

### 2.2 配置Enigmail

Enigmail是Thunderbird的一個插件，用於加密和解密PGP編碼的電子郵件，並使私鑰和公鑰的處理更容易一些。如果您使用的是最新版本的Enigmail，則應向您顯示Enigmail設置嚮導。![圖像](tool_pgplin4.png)

如果您沒有看到它，可以使用Thunderbird中的此菜單選項使其顯示。單擊Thunderbird窗口右側的三條水平線（“漢堡包菜單”）。![圖像](tool_pgplin5.png)

這是Enigmail為您提供的第一個選項：處理何時加密郵件的三個選項。
![圖像](tool_pgplin6.png)

如果您擁有其他人的“公鑰”，默認選項是加密電子郵件，Enigmail會加密您發送的電子郵件，但如果您還沒有收件人的公鑰，則保留未加密的電子郵件。您還可以選擇使用PGP密鑰隨時加密電子郵件，這意味著您必須為尚未擁有它們的人找到公鑰，或者完全關閉自動加密並當被指示時僅使用PGP。

最後一個選項是預防加密或解密電子郵件的潛在問題.注意選取了這個框框後會移除文字的格式，如粗體、底線或顏色.檢視過這些變動後,現在可以選擇「OK」.

單擊“下一步”按鈕。![圖像](tool_pgplin6.png)

現在，您可以選擇對所有外發電子郵件進行數字簽名。使用PGP簽署您的電子郵件允許收件人檢查您是否發送了郵件，並且郵件的內容未被篡改。單擊“默認情況下簽署我的消息”按鈕以啟用此功能。

然而，這樣做的缺點是，它還可以對您發送郵件的任何人標記您使用PGP。 [在世界的某些地方](www.cryptolaw.org/)（包括中國，伊朗，白俄羅斯和一些中東國家）使用未經許可的加密，即使是個人使用，也是非法的，所以你可能有很好的理由不要讓別人知道你使用PGP。

單擊“下一步”按鈕。

現在，您將看到一個選項，讓Enigmail對Mozilla Thunderbird的配置進行一些更改。
![圖像](tool_pgplin7.png)

如果單擊“詳細信息”按鈕，則可以查看這些更改的內容。

如果您默認使用PGP/Mime（我們稍後會設置），可以取消選中（重新啟用）以下選項以實現更加無縫的轉換：
- 禁用流動文本
- 以純文本格式查看郵件正文
- 不要撰寫HTML郵件

最終選項可防止電子郵件加密和解密中的潛在問題。請注意，選中此框將消除發送粗體，下劃線或彩色文本的功能。查看更改後，單擊“確定”按鈕。

現在，您將開始創建私鑰和公鑰。

### 2.3 創建公鑰和私鑰

Enigmail插件的安裝和設置已完成。現在，您可以選擇創建公鑰和私鑰對。這假設您之前沒有創建私鑰。
![圖像](tool_pgplin8.png)

單擊“下一步”按鈕。

除非您已經配置了多個電子郵件帳戶，否則Enigmail將選擇您已配置的電子郵件帳戶。您需要做的第一件事就是為您的私鑰提供一個高強度的密碼。有關如何執行此操作的詳細信息，請參閱** [密碼課程](umbrella://information/passwords)**。

Enigmail將顯示有關您的私鑰的一些信息以及配置設置。我們建議創建4096位長的密鑰。單擊“下一步”按鈕。
![圖像](tool_pgplin9.png)

**您的密鑰將在特定時間到期; 當發生這種情況時，其他人將完全停止使用它來發送給您的新電子郵件，儘管您可能無法獲得有關原因的任何警告或解釋。因此，您可能希望在到期日期前一個月左右標記日曆並注意此問題。**

可以通過為現有密鑰提供新的，更晚的到期日期來延長現有密鑰的生命週期，或者可以通過從頭創建一個新密鑰來替換它。這兩個過程可能都需要聯繫給您發送電子郵件的人，並確保他們獲得更新的密鑰;目前的軟件並不擅長自動化。所以提醒自己;如果您認為自己無法管理它，可以考慮設置密鑰以使其永不過期，但在這種情況下，即使您不再使用，其他人也可能會在將來與您聯繫時嘗試使用該密鑰。擁有私鑰或不再使用PGP。

Enigmail將生成密鑰，當它完成時，將打開一個小窗口，要求您生成吊銷證書。此吊銷證書非常重要，因為它允許您使私鑰和公鑰無效。請務必注意，僅刪除私鑰不會使公鑰無效，並可能導致人們向您發送無法解密的加密郵件。
![圖像](tool_pgplin10.png)

![](tool_pgplin11.png)

將打開一個窗口，為您提供保存吊銷證書的位置。雖然您可以將文件保存到計算機，但我們建議您將文件保存在您正在使用的USB驅動器上，並將驅動器存放在安全位置。我們還建議使用密鑰從計算機中刪除吊銷證書，以避免意外撤銷。

更好的是，將此文件保存在單獨的加密磁盤上。選擇保存此文件的位置，然後單擊“保存”按鈕。

在最右邊有一個小按鍵.請點擊此鍵以便設定欄位.解除Key ID 選項然後點選指紋碼選項.

最後，您完成了生成私鑰和公鑰。單擊“完成”按鈕。

### 2.4 可選步驟

### 2.4.1 顯示較長的密鑰ID

接下來的步驟是完全可選的，但在使用OpenPGP和Enigmail時它們會很有用。簡而言之，密鑰ID是指紋的一小部分。當涉及到驗證公鑰屬於特定人時，指紋是最好的方式。更改默認顯示可以更輕鬆地讀取您了解的證書的指紋。單擊配置按鈕，然後單擊Enigmail選項，然後單擊密鑰管理。
![圖像](tool_pgplin11.png)

將打開一個窗口，顯示兩列：名稱和密鑰ID。![圖像](tool_pgplin12.png)

在最右邊有一個小按鈕。單擊該按鈕以配置列。單擊“密鑰ID”選項，然後單擊“指紋”選項。
![圖像](tool_pgplin13.png)

現在通過將鼠標移動到每個列標題之間的行（即，在鍵列表頂部的“Key ID”標題的左側），並將該行拖動到該列的寬度來更改指紋列的寬度。剩下。繼續向左移動，直到您可以看到所有密鑰ID，如下所示：

現在列將如下所示：
![圖像](tool_pgplin14.png)

現在，您已設置為發送和接收常規和加密的電子郵件。接下來，您將完成實際查找人員與之交換加密郵件的步驟。

**使用PGP不會完全加密您的電子郵件，以便加密發件人和收件人信息。加密發件人和收件人信息會破壞電子郵件。將Thunderbird與Enigmail附加組件配合使用，可以輕鬆加密和解密電子郵件內容。**

### 3.0 讓其他人知道您正在使用PGP

** a) 讓人們知道您正在使用PGP和電子郵件**

你現在可以寄了收件人郵件而對方可以收到下載你的公鑰.

單擊Mozilla Thunderbird中的“寫入”按鈕。

填寫地址和主題，可能是“我的公鑰”，單擊Enigmail功能表並選擇“附加我的公鑰”選項。![圖像](tool_pgplin15.png)

您現在可以通過電子郵件和收件人下載並使用您發送的公鑰。

**如果使用此方法，最好讓收件人通過其他形式的通信驗證您的公鑰指紋，以防電子郵件被攔截和篡改。**

將你的證明用粗體字突顯,然後用滑鼠右鍵來開啟選單，然後選擇滙出公鑰到檔案中.

除了通過電子郵件告知人們，您還可以在您的網站上發布您的公鑰。最簡單的方法是上傳文件並鏈接到它。本指南不會介紹如何執行這些操作，但您應該知道如何將證書導出為將來使用的文件。

單擊配置按鈕，然後單擊Enigmail選項，然後單擊密鑰管理。

以粗體突出顯示證書，然後右鍵單擊以顯示菜單並選擇“將密鑰導出到文件”。![圖像](tool_pgplin16.png)

將彈出一個帶有三個按鈕的小窗口。單擊“僅導出公共密鑰”按鈕。
![圖像](tool_pgplin17.png)


接下來會出現讓你存檔的視窗. 為了以後可以更容易找到這個檔案，請把它存在文件目資料夾下.

現在將打開一個窗口，以便您保存文件。為了便於以後查找，請將文件保存到Documents文件夾中。

現在您可以根據需要使用此文件。

** c) 上傳到密鑰服務器**

密鑰服務器可以更輕鬆地搜索和下載公鑰。大多數現代密鑰服務器都在同步運行，這意味著上傳到一台服務器的公鑰最終將到達所有服務器。

雖然將公鑰上傳到密鑰服務器可能是讓人們知道您擁有公共PGP證書的便捷方式，但您應該知道，由於密鑰服務器的工作方式，上傳密鑰後無法刪除公鑰。 ，你只能將它們標記為已撤銷。

**在將您的公鑰上傳到密鑰服務器之前，最好花一點時間考慮您是否希望全世界都知道您有公鑰而無法在以後刪除此信息。**

點擊密鑰伺服器選單再選擇上傳公鑰的選項.

單擊Keyserver菜單項，然後選擇上傳公鑰選項。
![圖像](tool_pgplin18.png)

### 3.1 尋找正在使用PGP的其他人

** a) 通過電子郵件獲取公鑰**

您可能會收到一封作為電子郵件附件發送給您的公鑰。
![圖像](tool_pgplin19.png)

注意窗口底部的附件。右鍵單擊附件，然後選擇“導入OpenPGP密鑰”。將打開一個小窗口，為您提供導入結果。單擊“確定”按鈕。

如果再次打開Enigmail密鑰管理窗口，則可以檢查結果。您的PGP密鑰以粗體顯示，因為您同時擁有私鑰和公鑰。剛導入的公鑰不是粗體，因為它不包含私鑰。
![圖像](tool_pgplin20.png)

** b) 將公鑰作為文件**

您可以通過網站下載或某人可能通過聊天軟件發送公鑰來獲取公鑰。在這種情況下，您將假設您已將文件下載到下載文件夾中。

打開Enigmail密鑰管理器，然後單擊“文件”功能表。選擇“從文件導入密鑰”。

公鑰可能具有非常不同的文件名結尾，例如.asc，.pgp或.gpg。選擇文件，然後單擊“打開”按鈕。將打開一個小窗口，為您提供導入結果。單擊“確定”按鈕。

** c) 從密鑰服務器獲取公鑰**

Keyservers是獲取公鑰的一種非常有用的方法。嘗試尋找公鑰。打開密鑰管理器，然後單擊“密鑰服務器”菜單並選擇“搜索密鑰”。
![圖像](tool_pgplin21.png)

將彈出一個帶有搜索字段的小窗口。您可以使用完整的電子郵件地址，部分電子郵件地址或姓名進行搜索。在這種情況下，您將搜索包含“eff.org”的證書。![圖像](tool_pgplin22.png)

將彈出一個更大的窗口，其中包含許多選項。如果向下滾動，您會注意到某些證書是斜體並顯示為灰色。這些證書已被撤銷或自行過期。![圖像](tool_pgplin23.png)

讓我們以Danny O'Brien的公鑰為例，他有一張過期或撤銷的證書和一張有效證書。單擊左側的框選擇有效證書，然後按確定按鈕。
![圖像](tool_pgplin24.png)

在某些情況下，一個人可能擁有多個證書，所有證書都有效。請注意，任何人都可以為其他人上傳公共證書，並且其中一個密鑰可能不屬於擁有與之關聯的電子郵件地址的人。在這種情況下，驗證指紋是極爲重要的。

將彈出一個通知小窗口，通知您是否成功，Enigmail密鑰管理器現在將顯示添加的證書：![圖像](tool_pgplin25.png)

### 4.0 發送PGP加密郵件

現在，您將第一個加密電子郵件發送給收件人。在主Mozilla Thunderbird窗口中單擊“寫入”按鈕。將打開一個新窗口。

寫下您的信息，然後輸入收件人。對於此測試，請選擇您已擁有其公鑰的收件人。 Enigmail將檢測到這一點並自動加密電子郵件（您可以告訴它將通過電子郵件右下方的金鑰加密）。
![圖像](tool_pgplin26.png)

**請注意，主題行不會被加密，因此請選擇平淡無奇的內容，例如“你好”。**

單擊“發送”按鈕後，您將看到一個窗口，用於輸入PGP密鑰的密碼。請記住，這與您的電子郵件密碼不同！

輸入您的密碼，然後單擊“確定”按鈕，您的電子郵件將被加密並發送。

電子郵件的正文已加密並轉換。例如，我們上面的文字被轉換為：
![圖像](tool_pgplin27.png)

### 4.1 接收PGP加密郵件

讓我們來看看收到加密郵件時會發生什麼。首先，單擊該消息。

將打開一個小窗口，要求您輸入PGP密鑰的密碼。請記住：請勿輸入您的電子郵件密碼。單擊“確定”按鈕。![圖像](tool_pgplin28.png)

現在該消息將顯示為已解密 ![圖像](tool_pgplin29.png)

### 5.0 撤銷PGP密鑰

** a）通過Enigmail界面撤銷您的PGP密鑰**

Enigmail生成的PGP密鑰會在五年後自動過期。因此，如果您丟失了所有文件，您可以希望一旦密鑰過期，人們就會知道要求您提供另一個密鑰。

您可能有充分的理由在PGP密鑰到期之前禁用它。也許你想要生成一個新的，更強大的PGP密鑰。在Enigmail中撤銷自己的PGP密鑰的最簡單方法是通過Enigmail密鑰管理器。右鍵單擊您的PGP密鑰（以粗體顯示），然後選擇“撤銷密鑰”選項。![圖像](tool_pgplin30.png)

將彈出一個窗口，讓您知道發生了什麼並要求您確認。單擊“撤消密鑰”按鈕。
![圖像](tool_pgplin31.png)

密碼窗口打開，輸入PGP密鑰的密碼，然後單擊“確定”按鈕。

現在，將打開一個新窗口，讓您知道您成功了。單擊“確定”按鈕。

當您返回Enigmail密鑰管理窗口時，您會注意到PGP密鑰的更改。它現在變成灰色和斜體。![圖像](tool_pgplin32.png)

** b) 撤銷帶有撤銷證書的PGP密鑰**

如前所述，Enigmail生成的PGP密鑰會在五年後自動過期。因此，如果您丟失了所有文件，則可以確保一旦密鑰過期，人們就會知道要求您提供另一個密鑰。

就像我們之前提到的那樣，您可能有充分的理由在PGP密鑰到期之前禁用它。

同樣，其他人可能有充分理由撤銷現有密鑰。

您可能會收到來自朋友的撤銷證書作為他們想要撤銷其密鑰的通知。

在上一節中，您可能已經註意到，當您使用Enigmail密鑰管理器撤消密鑰時，Enigmail會在內部生成並導入吊銷證書。由於您已經擁有撤銷證書，因此您將使用之前生成的證書撤銷自己的密鑰。

從Enigmail密鑰管理器開始，單擊“文件”菜單，然後選擇“從文件導入密鑰”。![圖像](tool_pgplin33.png)

將打開一個窗口，以便您可以選擇吊銷證書。單擊該文件，然後單擊“打開”按鈕。您將收到證書已成功導入並且密鑰已被撤銷的通知。單擊“確定”按鈕。
![圖像](tool_pgplin34.png)

單擊“確定”按鈕後，您將被帶回Enigmail密鑰管理器，您會看到您撤銷的證書變為灰色和斜體。![圖像](tool_pgplin35.png)

如果您撤銷的密鑰是您自己的密鑰，並且您之前將公鑰上傳到密鑰服務器，則需要將現已撤銷的密鑰重新上傳到密鑰服務器，以便其他人看到不再使用它。

現在您已擁有所有正確的工具，請嘗試發送您自己的PGP加密電子郵件。